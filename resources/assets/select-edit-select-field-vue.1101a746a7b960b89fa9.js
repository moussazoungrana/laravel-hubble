(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1:function(t,e,n){"use strict";function i(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return o}));var o={data:function(){return{allErrors:{},timers:{}}},props:{field:{type:Object,required:!0},formData:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},value:{default:null},type:{type:String,default:"text"}},computed:{errors:function(){return Object.values(this.allErrors)},hasErrors:function(){return this.errors.length>0},rules:function(){return this.field.rules||[]},rulesAttrs:function(){var t=this,e={},n=this.rules;return Object.keys(n).forEach((function(i){var r=n[i],s=t.htmlRules[i];s&&(e[s]=r[0]||!0)})),e},htmlRules:function(){return{required:"required",min:"minlength",max:"maxlength"}}},methods:{input:function(t){this.$emit("input",t)},extractRuleMessage:function(t,e){var n=this;"string"==typeof e?this.$set(this.allErrors,t,e):"boolean"!=typeof e||e?e instanceof Promise?e.then((function(e){n.extractRuleMessage(t,e)})):"object"===s(e)?Object.keys(e).forEach((function(i){e[i].forEach((function(e){n.$set(n.allErrors,t,e)}))})):this.$delete(this.allErrors,t):this.$set(this.allErrors,t,this.$t("validation.".concat(t),{attribute:this.field.name}))},validate:function(t,e,n,r){var s,o;t?s=t.apply(void 0,[e,this.field.name].concat(i(r))):s=(o=window.hubble_rules).defaultHandler.apply(o,[e,this.field.name,n].concat(i(r)));this.extractRuleMessage(n,s)}},watch:{value:function(t){var e=this,n=Object.keys(this.rules);n.includes("nullable")&&window.hubble_rules.nullable(t,this.field.name)||t===this.item[this.field.name]?this.allErrors=[]:(this.$delete(this.allErrors,"any"),n.filter((function(t){return!["nullable"].includes(t)})).forEach((function(n){var i=e.rules[n],r=window.hubble_rules[n];["unique"].includes(n)||!r?(clearTimeout(e.timers[n]),e.timers[n]=setTimeout((function(){e.validate(r,t,n,i)}),250)):e.validate(r,t,n,i)})))}},created:function(){var t=this.$formErrors(this.field.name),e=this.$old(this.field.name,!1);e&&this.input(e),t&&t.length>0&&this.$set(this.allErrors,"any",t[0])}}},25:function(t,e,n){"use strict";n.r(e);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listener=e,this.options=Object.assign({threshold:400,element:document.documentElement},n),this.handler=this.handlerFunc.bind(this),this.observe()}var e,n,r;return e=t,(n=[{key:"handlerFunc",value:function(t){var e=this.options.element,n=parseInt(e.getAttribute("data-infinite-height")||0),i=e.scrollHeight-this.options.threshold;i>n&&e.scrollTop+e.clientHeight>=i&&(this.listener(),e.setAttribute("data-infinite-height",i))}},{key:"observe",value:function(){(this.options.element.isEqualNode(document.documentElement)?window:this.options.element).addEventListener("scroll",this.handler)}}])&&i(e.prototype,n),r&&i(e,r),t}();function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.handler=n,this.handle=this.handle.bind(this),document.addEventListener("click",this.handle)}var e,n,i;return e=t,(n=[{key:"handle",value:function(t){this.element.contains(t.target)||(this.handler(),document.removeEventListener("click",this.handle))}}])&&s(e.prototype,n),i&&s(e,i),t}(),a=n(1),l={name:"edit-select-field",data:function(){return{realOptions:[],page:1,dropdownOpened:!1,searchTimer:null,searchValue:null,inputValue:null,currentIndex:-1,lockSearch:!1,tags:[],dropdownTags:[]}},props:{options:{required:!0,type:[Array,String]},valueKey:{required:!0,type:String},textKey:{required:!0,type:String},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:null},emptyOptionName:{type:String,default:null},returnObject:{type:Boolean,default:!0},tagsToDisplay:{type:Number,default:2}},mixins:[a.a],computed:{wrapper:function(){return this.$refs.optionsContent},listOptions:function(){var t=this;if(this.multiple){var e=this.dropdownTags.map((function(e){return e[t.valueKey]}));return this.realOptions.filter((function(n){return!e.includes(n[t.valueKey])}))}return this.realOptions}},methods:{openDropdown:function(){var t=this;this.dropdownOpened||(this.dropdownOpened=!0,this.dropdownTags=Object.assign([],this.tags),this.currentIndex=-1,this.scrollToOption(0,"prev"),this.$nextTick((function(){new o(t.$refs.optionsContent,(function(){t.close()})),t.$refs.tagSearchInput&&t.$refs.tagSearchInput.focus()})))},fetchOptions:function(){var t=this,e="".concat(this.options,"?page=").concat(this.page);this.searchValue&&(e+="&search="+this.searchValue),this.$axios.get(e).then((function(e){1!==t.page?t.realOptions=t.realOptions.concat(e.data.data):t.realOptions=e.data.data}))},onKeydown:function(t){if(13===t.keyCode){if(t.preventDefault(),this.currentIndex<=-1)return;var e=this.listOptions[this.currentIndex];return this.lockSearch=!0,void this.select(e)}40!==t.keyCode?38!==t.keyCode?9!==t.keyCode&&27!==t.keyCode||this.close():this.currentIndex-1>-1&&(this.currentIndex-=1,this.scrollToOption(this.currentIndex,"prev")):this.realOptions.length>this.currentIndex+1&&(this.currentIndex+=1,this.scrollToOption(this.currentIndex))},scrollToOption:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"next",n=this.wrapper.querySelector("#custom--select--option-".concat(t));if(n){var i=n.getBoundingClientRect(),r=this.wrapper.getBoundingClientRect().height;"next"===e?n.offsetTop+i.height>r+this.wrapper.scrollTop&&this.wrapper.scrollTo({left:0,top:n.offsetTop+i.height-r,behavior:"smooth"}):n.offsetTop<this.wrapper.scrollTop&&this.wrapper.scrollTo({left:0,top:n.offsetTop,behavior:"smooth"})}},close:function(){this.dropdownOpened=!1},onSearch:function(t){var e=this,n=t.target.value,i=[];if(this.multiple)i=this.tags.map((function(t){return t[e.textKey]}));else{var r=this.realOptions.find((function(t){return t[e.valueKey]===e.inputValue}));r&&(i=[r[this.textKey]])}clearTimeout(this.searchTimer),n===this.searchValue||i.includes(n)&&-1!==this.currentIndex||(this.searchTimer=setTimeout((function(){e.search(n)}),Array.isArray(this.options)?0:500))},search:function(t){var e=this;t=String(t).toLowerCase(),this.searchValue=t,Array.isArray(this.options)?(t||(this.realOptions=this.options),this.realOptions=this.options.filter((function(n){return String(n[e.textKey]).toLowerCase().includes(t)}))):(1===this.page&&this.fetchOptions(),this.page=1,this.$refs.optionsContent.removeAttribute("data-infinite-height"))},select:function(t){var e=this;if(this.multiple){var n=this.tags||[],i=n.findIndex((function(n){return n[e.valueKey]===t[e.valueKey]}));return-1===i?n.push(t):n.splice(i,1),void(this.tags=n)}this.inputValue=t[this.valueKey],this.input(this.returnObject?t:t[this.valueKey]),this.dropdownOpened=!1},isSelected:function(t){var e=this;return this.multiple?-1!==(this.tags||[]).findIndex((function(n){return n[e.valueKey]===t[e.valueKey]})):!!this.value&&t[this.valueKey]===(this.returnObject?this.value[this.valueKey]:this.value)},empty:function(){if(this.multiple)return this.tags=[],this.dropdownOpened=!1,void this.input([]);this.inputValue=null,this.input(null),this.dropdownOpened=!1},removeTag:function(t){var e=this,n=this.tags.findIndex((function(n){return n[e.valueKey]===t[e.valueKey]}));-1!==n&&this.tags.splice(n,1)},removeAllTags:function(){this.tags=[]}},watch:{tags:function(t){var e=this;this.input(this.returnObject?t:t.map((function(t){return t[e.valueKey]})))},page:function(){this.fetchOptions()},inputValue:function(t){var e=this;t||this.$refs.textInput.removeAttribute("value");var n=this.realOptions.find((function(n){return n[e.valueKey]===t}));this.$refs.textInput.value=n?n[this.textKey]:null}},created:function(){Array.isArray(this.options)?this.realOptions=this.options:this.fetchOptions(),this.multiple?this.tags=this.value||[]:this.inputValue=this.value},mounted:function(){var t=this;this.$nextTick((function(){new r((function(){t.page=t.page+1}),{element:t.$refs.optionsContent,threshold:30})}))}},u=n(0),c=Object(u.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"custom--select--container"},[t.multiple?t._e():[n("input",{ref:"textInput",class:{error:t.hasErrors},attrs:{type:"text",placeholder:t.placeholder,id:t.field.name,autocomplete:"off"},on:{click:function(t){t.stopPropagation()},keyup:t.onSearch,keydown:t.onKeydown,focus:t.openDropdown}}),t._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"input",attrs:{name:t.field.name},domProps:{value:t.inputValue}})],t._v(" "),t.multiple?[n("div",{staticClass:"tags--wrapper",class:{error:t.hasErrors}},[n("div",{staticClass:"tags--fake--input",class:{focused:t.dropdownOpened},on:{click:function(e){return e.stopPropagation(),t.openDropdown(e)}}},[n("div",{staticClass:"tags--container"},[!t.tags||t.tags&&0===t.tags.length?n("span",{staticClass:"placeholder"},[t._v(t._s(t.placeholder))]):t._e(),t._v(" "),t._l((t.tags||[]).slice(0,t.tagsToDisplay),(function(e,i){return n("div",{key:"tag-"+i,staticClass:"tag"},[n("span",{staticClass:"tag--content",attrs:{title:e[t.textKey]}},[t._v(t._s(e[t.textKey]))]),t._v(" "),n("svg",{attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"},on:{click:function(n){return t.removeTag(e)}}},[n("path",{attrs:{d:"M6 18L18 6M6 6l12 12"}})])])})),t._v(" "),t.tags.length>t.tagsToDisplay?n("div",[t._v("...")]):t._e()],2),t._v(" "),n("div",{staticClass:"tags--fake--input--btns"},[n("button",{staticClass:"btn count"},[t._v(t._s(t.tags.length))]),t._v(" "),n("svg",{directives:[{name:"show",rawName:"v-show",value:t.tags.length>0,expression:"tags.length > 0"}],attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"},on:{click:t.removeAllTags}},[n("path",{attrs:{d:"M6 18L18 6M6 6l12 12"}})]),t._v(" "),n("svg",{attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{d:"M19 9l-7 7-7-7"}})])])])]),t._v(" "),t._l(t.tags,(function(e,i){return n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:i,ref:"input",refInFor:!0,attrs:{name:t.field.name+"[]"},domProps:{value:e[t.valueKey]}})}))]:t._e(),t._v(" "),n("input-errors",{attrs:{errors:t.errors}}),t._v(" "),n("div",{staticClass:"custom--select--wrapper",class:{open:t.dropdownOpened}},[n("div",{staticClass:"tags--wrapper--search--input--wrapper"},[n("input",{ref:"tagSearchInput",staticClass:"search--input",attrs:{type:"text",placeholder:t.$t("dashboard.search")||"Search ..."},on:{click:function(t){t.stopPropagation()},keyup:t.onSearch,keydown:t.onKeydown}}),t._v(" "),n("svg",{attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}})])]),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.dropdownTags.length>0,expression:"dropdownTags.length > 0"}],staticClass:"all-tags--wrapper custom--scrollbar"},t._l(t.dropdownTags,(function(e,i){return n("li",{key:"all-tags-"+e[t.valueKey],staticClass:"fake-checkbox--container",attrs:{id:"all-tag--option-"+i},on:{click:function(n){return n.stopPropagation(),t.select(e)}}},[n("div",{staticClass:"fake-checkbox",class:{selected:t.isSelected(e)}}),t._v(" "),n("div",[t._v(t._s(e[t.textKey]))])])})),0),t._v(" "),n("ul",{ref:"optionsContent",staticClass:"custom--select--content custom--scrollbar"},t._l(t.listOptions,(function(e,i){return n("li",{key:"custom--option-"+e[t.valueKey],staticClass:"fake-checkbox--container",class:{hover:t.currentIndex===i},attrs:{id:"custom--select--option-"+i},on:{click:function(n){return n.stopPropagation(),t.select(e)}}},[n("div",{staticClass:"fake-checkbox",class:{selected:t.isSelected(e)}}),t._v(" "),n("div",[t._v(t._s(e[t.textKey]))])])})),0)])],2)}),[],!1,null,"16da3414",null);e.default=c.exports}}]);